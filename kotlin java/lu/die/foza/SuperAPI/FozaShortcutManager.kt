//// Decompiled by Jadx - 941ms//package lu.die.foza.SuperAPI;import android.annotation.SuppressLint;import android.app.PendingIntent;import android.content.Context;import android.content.Intent;import android.content.pm.ApplicationInfo;import android.content.pm.PackageManager;import android.content.pm.ShortcutInfo;import android.content.pm.ShortcutManager;import android.graphics.Bitmap;import android.graphics.Canvas;import android.graphics.drawable.BitmapDrawable;import android.graphics.drawable.Drawable;import android.graphics.drawable.Icon;import android.os.Build;import java.util.Arrays;import kotlin.Metadata;import kotlin.jvm.JvmStatic;import kotlin.jvm.internal.DefaultConstructorMarker;import kotlin.jvm.internal.Intrinsics;import kotlin.jvm.internal.StringCompanionObject;import kotlin.text.StringsKt;import lu.die.foza.SleepyFox.ࡠ;import lu.die.fozacompatibility.FozaPackageManager;import org.jetbrains.annotations.NotNull;import org.jetbrains.annotations.Nullable;@Metadata(d1 = {"\u0000B\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u000b\n\u0000\n\u0002\u0010\b\n\u0000\n\u0002\u0010\u000e\n\u0002\b\u0003\n\u0002\u0010\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0004\n\u0002\u0018\u0002\n\u0002\b\u0004\u0018\u0000 \u001a2\u00020\u0001:\u0002\u001a\u001bB\u0007¢\u0006\u0004\b\u0002\u0010\u0003J\u0010\u0010\u0004\u001a\u0004\u0018\u00010\u00052\u0006\u0010\u0006\u001a\u00020\u0007J\u0016\u0010\b\u001a\u00020\t2\u0006\u0010\n\u001a\u00020\u000b2\u0006\u0010\f\u001a\u00020\rJ \u0010\b\u001a\u00020\t2\u0006\u0010\n\u001a\u00020\u000b2\u0006\u0010\f\u001a\u00020\r2\b\u0010\u000e\u001a\u0004\u0018\u00010\rJ*\u0010\b\u001a\u00020\t2\u0006\u0010\n\u001a\u00020\u000b2\u0006\u0010\f\u001a\u00020\r2\b\u0010\u000e\u001a\u0004\u0018\u00010\r2\b\u0010\u000f\u001a\u0004\u0018\u00010\u0005J<\u0010\u0010\u001a\u00020\u00112\u0006\u0010\u0012\u001a\u00020\u00132\u0006\u0010\u0014\u001a\u00020\r2\u0006\u0010\u0015\u001a\u00020\u00052\u0006\u0010\u0016\u001a\u00020\r2\b\u0010\u0017\u001a\u0004\u0018\u00010\u00182\b\u0010\u0019\u001a\u0004\u0018\u00010\rH\u0007J0\u0010\u0010\u001a\u00020\u00112\u0006\u0010\u0012\u001a\u00020\u00132\u0006\u0010\u0014\u001a\u00020\r2\u0006\u0010\u0015\u001a\u00020\u00052\u0006\u0010\u0016\u001a\u00020\r2\b\u0010\u0017\u001a\u0004\u0018\u00010\u0018¨\u0006\u001c"}, d2 = {"Llu/die/foza/SuperAPI/FozaShortcutManager;", "", "<init>", "()V", "drawableToBitmap", "Landroid/graphics/Bitmap;", "drawable", "Landroid/graphics/drawable/Drawable;", "installShortcutSingle", "", "userId", "", "packageName", "", "customName", "customIcon", "installShortcut", "", "context", "Landroid/content/Context;", "strPkg", "icon", "label", "sc", "Llu/die/foza/SuperAPI/IShortcutCallback;", "userName", "Companion", "ShortcutIntentReceiver", "foza_release"}, k = 1, mv = {2, 0, 0}, xi = 50)public final class FozaShortcutManager {    @NotNull    public static final Companion Companion = new Companion((DefaultConstructorMarker) null);    @NotNull    public static final FozaShortcutManager Ϳ = new FozaShortcutManager();    @Nullable    public static IShortcutCallback Ԩ;    @JvmStatic    @NotNull    public static final FozaShortcutManager getInstance() {        return Companion.getInstance();    }    @Nullable    public final Bitmap drawableToBitmap(@NotNull Drawable drawable) {        if (drawable instanceof BitmapDrawable) {            return ((BitmapDrawable) drawable).getBitmap();        }        Bitmap createBitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), drawable.getOpacity() != -1 ? Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565);        Canvas canvas = new Canvas(createBitmap);        drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());        drawable.draw(canvas);        return createBitmap;    }    public final void installShortcut(@NotNull Context context, @NotNull String str, @NotNull Bitmap bitmap, @NotNull String str2, @Nullable IShortcutCallback iShortcutCallback) {        installShortcut(context, str, bitmap, str2, iShortcutCallback, "");    }    public final boolean installShortcutSingle(int i, @NotNull String str) {        String str2;        try {            Context hostContext = FozaCore.getHostContext();            try {                ApplicationInfo applicationInfo = FozaPackageManager.get().getApplicationInfo(str);                PackageManager packageManager = hostContext.getPackageManager();                CharSequence loadLabel = applicationInfo != null ? applicationInfo.loadLabel(packageManager) : null;                if (loadLabel == null || (str2 = loadLabel.toString()) == null) {                    str2 = "null";                }                String str3 = str2 + " (" + i + ')';                Bitmap drawableToBitmap = applicationInfo != null ? drawableToBitmap(applicationInfo.loadIcon(packageManager)) : null;                if (drawableToBitmap == null) {                    drawableToBitmap = drawableToBitmap(hostContext.getApplicationInfo().loadIcon(hostContext.getPackageManager()));                }                Intrinsics.checkNotNull(drawableToBitmap);                installShortcut(hostContext, str, drawableToBitmap, str3, null, String.valueOf(i));                return false;            } catch (Throwable th) {                return false;            }        } catch (Exception e) {            return false;        }    }    @SuppressLint({"UnspecifiedImmutableFlag"})    public final void installShortcut(@NotNull Context context, @NotNull String str, @NotNull Bitmap bitmap, @NotNull String str2, @Nullable IShortcutCallback iShortcutCallback, @Nullable String str3) {        try {            Ԩ = iShortcutCallback;            ࡠ.ԩ.getClass();            boolean z = ࡠ.ԫ().Ԯ(str);            Intent intent = new Intent(context, (Class<?>) FozaShortcutRouter.class);            intent.setAction("android.intent.action.VIEW");            intent.putExtra("key_launch_target_package_name", str);            intent.putExtra("key_launch_target_app_inner", z);            intent.putExtra("key_launch_target_username", str3);            int i = Build.VERSION.SDK_INT;            if (i < 26) {                Intent intent2 = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");                intent2.putExtra("duplicate", false);                intent2.putExtra("android.intent.extra.shortcut.ICON", Bitmap.createScaledBitmap(bitmap, 128, 128, true));                intent2.putExtra("android.intent.extra.shortcut.NAME", str2);                intent2.putExtra("android.intent.extra.shortcut.INTENT", intent);                context.sendOrderedBroadcast(intent2, null, new ShortcutIntentReceiver(), null, -1, null, null);                return;            }            StringCompanionObject stringCompanionObject = StringCompanionObject.INSTANCE;            String format = String.format("%d", Arrays.copyOf(new Object[]{Integer.valueOf(StringsKt.trim(str2).toString().hashCode())}, 1));            Intrinsics.checkNotNullExpressionValue(format, "format(...)");            ShortcutInfo build = new ShortcutInfo.Builder(context, format).setIcon(Icon.createWithBitmap(bitmap)).setShortLabel(str2).setIntent(intent).build();            PendingIntent broadcast = i >= 31 ? PendingIntent.getBroadcast(context, 0, new Intent(context, (Class<?>) ShortcutIntentReceiver.class), 0x0a000000) : PendingIntent.getBroadcast(context, 0, new Intent(context, (Class<?>) ShortcutIntentReceiver.class), 0x08000000);            Object systemService = context.getSystemService("shortcut");            Intrinsics.checkNotNull(systemService, "null cannot be cast to non-null type android.content.pm.ShortcutManager");            ShortcutManager shortcutManager = (ShortcutManager) systemService;            if (shortcutManager.isRequestPinShortcutSupported()) {                shortcutManager.requestPinShortcut(build, broadcast.getIntentSender());            }        } catch (Exception e) {            e.printStackTrace();        }    }    public final boolean installShortcutSingle(int i, @NotNull String str, @Nullable String str2) {        try {            Context hostContext = FozaCore.getHostContext();            try {                ApplicationInfo applicationInfo = FozaPackageManager.get().getApplicationInfo(str);                Bitmap drawableToBitmap = applicationInfo != null ? drawableToBitmap(applicationInfo.loadIcon(hostContext.getPackageManager())) : null;                if (drawableToBitmap == null) {                    drawableToBitmap = drawableToBitmap(hostContext.getApplicationInfo().loadIcon(hostContext.getPackageManager()));                }                return installShortcutSingle(i, str, str2, drawableToBitmap);            } catch (Throwable th) {                return false;            }        } catch (Exception e) {            return false;        }    }    public final boolean installShortcutSingle(int i, @NotNull String str, @Nullable String str2, @Nullable Bitmap bitmap) {        try {            Context hostContext = FozaCore.getHostContext();            Intrinsics.checkNotNull(bitmap);            installShortcut(hostContext, str, bitmap, str2 == null ? "UNKNOWN" : str2, null, String.valueOf(i));            return false;        } catch (Exception e) {            return false;        }    }}